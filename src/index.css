@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply m-0 min-h-screen bg-gradient-to-br from-pink-50 to-violet-50 text-gray-800 overflow-hidden antialiased;
    font-family: 'Poppins', sans-serif;
  }
  h1, h2, h3, h4, h5, h6 {
    @apply font-serif font-bold text-gray-900;
  }
}

@layer components {
  .btn {
    @apply px-6 py-3 rounded-full font-medium transition-all duration-300 ease-out hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  .btn-primary {
    @apply bg-pink-400 text-white hover:bg-pink-500 focus:ring-pink-400;
  }
  .btn-secondary {
    @apply bg-violet-400 text-white hover:bg-violet-500 focus:ring-violet-400;
  }
  .glass {
    @apply bg-white/70 backdrop-blur-md border border-white/30 shadow-xl;
  }
  /* Utility: apply UI font (inherit from body) */
  .font-ui {
    font-family: inherit;
  }
}

/* Hearts floating base (used by component) */
.hearts-container {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}
.heart {
  position: absolute;
  font-size: 1.75rem;
  color: #f9a8d4; /* pink-300 */
  opacity: 0.8;
  animation: floatUp 12s linear infinite;
  text-shadow: 0 0 12px rgba(249, 168, 212, 0.6);
}
@keyframes floatUp {
  0% { transform: translateY(100vh) scale(0.6); opacity: 0.6; }
  100% { transform: translateY(-10vh) scale(1); opacity: 0; }
}

/* Preloader */
#preloader {
  @apply fixed inset-0 flex items-center justify-center bg-white z-50 transition-opacity duration-700 ease-out;
}
#preloader.loaded { opacity: 0; pointer-events: none; }
.loader-heart { font-size: 3rem; animation: beat 1.2s infinite cubic-bezier(0.215, 0.610, 0.355, 1); }
@keyframes beat {
  0% { transform: scale(0.95); }
  5% { transform: scale(1.1); }
  39% { transform: scale(0.85); }
  45% { transform: scale(1); }
  60% { transform: scale(0.95); }
  100% { transform: scale(0.9); }
}

/* Loader title shimmer */
.loader-title {
  background: linear-gradient(90deg, #111 0%, #6b7280 50%, #111 100%);
  background-size: 200% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: shimmer 2200ms linear infinite;
}
@keyframes shimmer {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

/* Loading dots */
.loading-dots span { display: inline-block; animation: dotPulse 1200ms ease-in-out infinite; }
.loading-dots span:nth-child(2) { animation-delay: 150ms; }
.loading-dots span:nth-child(3) { animation-delay: 300ms; }
@keyframes dotPulse {
  0%, 100% { transform: translateY(0); opacity: 0.5; }
  50% { transform: translateY(-2px); opacity: 1; }
}

/* Progress bar */
.loader-bar {
  width: 12rem; /* 48 */
  height: 0.375rem; /* 1.5 */
  background: #e5e7eb; /* gray-200 */
  border-radius: 9999px;
  overflow: hidden;
}
.loader-bar .bar-fill {
  display: block;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ec4899, #8b5cf6); /* pink-500 to violet-500 */
  animation: barFill 1600ms cubic-bezier(0.22, 1, 0.36, 1) infinite;
}
@keyframes barFill {
  0% { width: 0%; }
  80% { width: 100%; }
  100% { width: 100%; }
}

/* Respect reduced motion for preloader */
@media (prefers-reduced-motion: reduce) {
  .loader-heart { animation: none !important; }
  .loader-title { animation: none !important; }
  .loading-dots span { animation: none !important; }
  .loader-bar .bar-fill { animation: none !important; width: 100% !important; }
}

/* Confetti */
.confetti-piece {
  position: absolute;
  top: -10%;
  transform: translateY(-20vh) rotate(0deg);
  animation-name: confettiFall;
  animation-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  animation-fill-mode: forwards;
}
@keyframes confettiFall {
  0% { transform: translateY(-20vh) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateY(110vh) rotate(540deg); opacity: 0; }
}

/* Ambient orbs */
.orb {
  position: absolute;
  border-radius: 9999px;
  filter: blur(24px);
  opacity: 0.65;
}
.animate-orbFloat {
  animation-name: orbFloat;
  animation-duration: var(--orb-duration, 14s);
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-direction: alternate;
}
@keyframes orbFloat {
  0% { transform: translate3d(0, 0, 0) scale(1); }
  100% { transform: translate3d(0, -18px, 0) scale(1.04); }
}

/* Vignette overlay to softly frame the scene */
.vignette-overlay {
  background: radial-gradient(ellipse at center, rgba(0,0,0,0) 58%, rgba(0,0,0,0.10) 100%);
}

/* Remove focus border from programmatically focused headings */
[data-focus]:focus,
[data-focus]:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Global smooth scroll for anchor jumps */
html { scroll-behavior: smooth; }

/* Navbar gentle entrance */
.nav-appear { animation: navFadeSlide 600ms cubic-bezier(0.22, 1, 0.36, 1) both; }
@keyframes navFadeSlide {
  from { opacity: 0; transform: translateY(-8px) scale(0.98); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* Hide scrollbars for horizontal pill navs */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Anime Weather Vibes */
.anime-weather { overflow: hidden; }

/* Sakura petals */
.weather-petal {
  position: absolute;
  top: -8%;
  will-change: transform, opacity;
  filter: drop-shadow(0 2px 6px rgba(236,72,153,0.25));
  animation-name: petalFall;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  opacity: 0.9;
}
@keyframes petalFall {
  0% { transform: translate3d(0, -12vh, 0) rotate(0deg); opacity: 0; }
  10% { opacity: 0.95; }
  50% { transform: translate3d(25px, 45vh, 0) rotate(60deg); }
  100% { transform: translate3d(-15px, 110vh, 0) rotate(120deg); opacity: 0; }
}

/* Rain */
.weather-raindrop {
  position: absolute;
  top: -10%;
  width: 2px;
  background: linear-gradient(to bottom, rgba(59,130,246,0.0), rgba(59,130,246,0.5)); /* sky-500 */
  border-radius: 9999px;
  will-change: transform, opacity;
  animation-name: rainFall;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}
@keyframes rainFall {
  0% { transform: translateY(-10vh); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateY(110vh); opacity: 0.8; }
}

/* Snow */
.weather-snow {
  position: absolute;
  top: -8%;
  will-change: transform, opacity;
  filter: drop-shadow(0 2px 6px rgba(99,102,241,0.15));
  animation-name: snowFall;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  opacity: 0.95;
}
@keyframes snowFall {
  0% { transform: translate3d(0, -10vh, 0) rotate(0deg); opacity: 0; }
  20% { opacity: 1; }
  50% { transform: translate3d(var(--drift, 20px), 50vh, 0) rotate(20deg); }
  100% { transform: translate3d(calc(var(--drift, 20px) * -1), 110vh, 0) rotate(40deg); opacity: 0.85; }
}

/* Clouds */
.weather-cloud {
  position: absolute;
  left: -40vw;
  border-radius: 9999px;
  background: radial-gradient(ellipse at 40% 40%, rgba(255,255,255,0.9), rgba(255,255,255,0.6) 60%, rgba(255,255,255,0.0) 70%);
  filter: blur(6px);
  animation-name: cloudDrift;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}
@keyframes cloudDrift {
  0% { transform: translateX(-10vw); }
  100% { transform: translateX(120vw); }
}

/* Subtle rhythm animations for Story (respect reduced motion) */
@keyframes softPulse {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(236,72,153,0.0)); }
  50% { transform: scale(1.035); filter: drop-shadow(0 0 12px rgba(236,72,153,0.35)); }
}

@keyframes breathe {
  0%, 100% { transform: scale(1); box-shadow: 0 0 0 rgba(236,72,153,0.0); }
  50% { transform: scale(1.12); box-shadow: 0 0 12px rgba(236,72,153,0.35); }
}

@keyframes cardGlow {
  0%, 100% { box-shadow: 0 20px 40px rgba(0,0,0,0.15), 0 0 0 0 rgba(236,72,153,0.0); }
  50% { box-shadow: 0 24px 56px rgba(0,0,0,0.18), 0 0 0 6px rgba(236,72,153,0.12); }
}

.animate-softPulse { animation: softPulse 2400ms ease-in-out infinite; }
.animate-breathe   { animation: breathe 3600ms ease-in-out infinite; }
.story-card-glow    { animation: cardGlow 4800ms ease-in-out infinite; }

@media (prefers-reduced-motion: reduce) {
  .animate-softPulse,
  .animate-breathe,
  .story-card-glow { animation: none !important; }
}

/* Sheen highlight for StoryCard */
.sheen {
  position: absolute;
  top: -20%;
  left: -50%;
  width: 140%;
  height: 140%;
  pointer-events: none;
  background: linear-gradient(
    105deg,
    rgba(255,255,255,0) 45%,
    rgba(255,255,255,0.35) 50%,
    rgba(255,255,255,0) 55%
  );
  transform: translateX(-120%) rotate(8deg);
  filter: blur(2px);
}
.group:hover .sheen { animation: sheenSweep 1100ms cubic-bezier(0.22, 1, 0.36, 1) forwards; }
@keyframes sheenSweep {
  to { transform: translateX(120%) rotate(8deg); }
}
@media (prefers-reduced-motion: reduce) {
  .group:hover .sheen { animation: none !important; }
}
